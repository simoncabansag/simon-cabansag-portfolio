const highEndGpus = [
    "rtx 4090",
    "rtx 4080",
    "rtx 4070 ti",
    "rtx 4070",
    "rtx 4060 ti",
    "rtx 4060",
    "rtx 4050",
    "rtx 3090",
    "rtx 3080 ti",
    "rtx 3080",
    "rtx 3070 ti",
    "rtx 3070",
    "rtx 3060 ti",
    "rtx 3060",
    "rtx 2080 ti",
    "rtx 2080 super",
    "rtx 2080",
    "rtx 2070 ti",
    "rtx 2070",
    "rtx 2060 super",
    "rtx 2060",
    "gtx 1080 ti",
    "gtx 1080",
    "gtx 1070 ti",
    "gtx 1070",
    "titan v",
    "titan rtx",
    "titan x",
    "titan xp",
    "quadro rtx 8000",
    "quadro rtx 6000",
    "quadro rtx 5000",
    "rx 7900 xtx",
    "rx 7900 xt",
    "rx 7800 xt",
    "rx 7700 xt",
    "rx 7700",
    "rx 6900 xt",
    "rx 6800 xt",
    "rx 6800",
    "rx 6700 xt",
    "rx 6600 xt",
    "rx 5700 xt",
    "rx 5700",
    "rx 5600 xt",
    "radeon vii",
    "radeon pro w6800",
    "radeon pro w6600",
    "m3 max",
    "m3 pro",
    "m2 ultra",
    "m2 max",
    "m2 pro",
    "m1 ultra",
    "m1 max",
    "m1 pro",
    "apple a17 pro",
    "a16 bionic",
    "a15 bionic",
    "a14 bionic",
    "arc a770",
    "arc a750",
    "arc a580",
    "arc a380",
    "arc a350",
    "iris xe",
    "iris plus",
    "iris 7500",
    "iris 6200",
    "xe graphics",
    "adreno 730",
    "adreno 720",
    "adreno 660",
    "adreno 650",
    "adreno 630",
    "adreno 640",
    "adreno 620",
    "adreno 610",
    "adreno 540",
    "adreno 530",
    "xclipse",
    "exynos 2200",
    "exynos 2100",
    "exynos 9810",
] as const

const lowEndGpus = [
    "gtx 1050",
    "gtx 1050 ti",
    "gtx 960",
    "gtx 950",
    "gtx 750 ti",
    "gtx 750",
    "gtx 460",
    "gtx 550 ti",
    "gtx 560",
    "gtx 550",
    "gt 1030",
    "gt 1010",
    "rx 550",
    "rx 560",
    "rx 640",
    "rx 530",
    "rx 520",
    "radeon vega 3",
    "vega 6",
    "vega 8",
    "vega 11",
    "vega 13",
    "radeon 530",
    "radeon 520",
    "radeon r5",
    "radeon r7",
    "radeon r9",
    "intel hd graphics",
    "intel uhd graphics",
    "intel hd 4000",
    "hd 5000",
    "hd 6000",
    "hd 6200",
    "hd 6300",
    "hd 4400",
    "hd 4400",
    "intel iris",
    "intel iris pro",
    "iris 540",
    "iris 5100",
    "intel uhd 630",
    "intel uhd 620",
    "intel uhd 610",
    "intel uhd 605",
    "adreno 505",
    "adreno 506",
    "adreno 510",
    "adreno 512",
    "adreno 503",
    "adreno 400",
    "adreno 405",
    "adreno 308",
    "adreno 306",
    "adreno 305",
    "adreno 304",
    "adreno 302",
    "adreno 500",
    "adreno 420",
    "adreno 430",
    "adreno 440",
    "mali t860",
    "mali t880",
    "mali g72",
    "mali g71",
    "mali g52",
    "mali g31",
    "power vr sgx",
    "power vr rogue",
    "a12 bionic",
    "a11 bionic",
    "a10 bionic",
    "a9 bionic",
    "a8 bionic",
    "a7 bionic",
    "mesa",
    "swiftshader",
    "software renderer",
    "angle",
    "llvmpipe",
] as const

export function isHighEndGpu(
    gl: WebGLRenderingContext | WebGL2RenderingContext
) {
    if (!gl) return false

    const gpuName = getUnmaskedInfo(gl).renderer.toLowerCase()
    if (highEndGpus.some((gpu) => gpuName.includes(gpu))) return true
    if (lowEndGpus.some((gpu) => gpuName.includes(gpu))) return false
    return false
}

export function getUnmaskedInfo(
    gl: WebGLRenderingContext | WebGL2RenderingContext
) {
    const unMaskedInfo = {
        renderer: "",
        vendor: "",
    }

    const dbgRenderInfo = gl.getExtension("WEBGL_debug_renderer_info")
    if (dbgRenderInfo != null) {
        unMaskedInfo.renderer = gl.getParameter(
            dbgRenderInfo.UNMASKED_RENDERER_WEBGL
        )
        unMaskedInfo.vendor = gl.getParameter(
            dbgRenderInfo.UNMASKED_VENDOR_WEBGL
        )
    }
    return unMaskedInfo
}
